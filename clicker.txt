(clicker) chiraagbalu@mac clicker % python run_sglang_eval.py configs/16_gelato_30b_a
3b_17.py --ssh ubuntu@150.136.217.70:22
/Users/chiraagbalu/wafer_stuff/clicker/run_sglang_eval.py:272: SyntaxWarning: invalid
 escape sequence '\$'
  --output {remote_result_dir}/results.json"""
/Users/chiraagbalu/wafer_stuff/clicker/run_sglang_eval.py:274: SyntaxWarning: invalid
 escape sequence '\$'
  # Run in tmux session
/Users/chiraagbalu/wafer_stuff/clicker/run_sglang_eval.py:273: SyntaxWarning: invalid
 escape sequence '\$'
  
INFO     üöÄ SGLang Evaluation Pipeline                                               
INFO     üìÖ Experiment: 16_gelato_30b_a3b_17_20251111-055026                         
INFO     üìÇ Local results: results/16_gelato_30b_a3b_17_20251111-055026              
INFO     ============================================================                
INFO                                                                                 
INFO     üì¶ Step 1: Deploying SGLang Server                                          
INFO     ------------------------------------------------------------                
INFO        Model: mlfoundations/Gelato-30B-A3B                                      
INFO        Port: 30000                                                              
INFO        Location: Remote                                                         
INFO        SSH: ubuntu@150.136.217.70:22                                            
INFO                                                                                 
INFO     üöÄ Deploying SGLang server...                                               
INFO        Model: mlfoundations/Gelato-30B-A3B                                      
INFO        GPUs: [4, 5] (TP=2)                                                      
INFO        Port: 30000                                                              
INFO     üîó Connecting to ubuntu@150.136.217.70:22...                                
INFO                                                                                 
INFO     üîç Preflight Checks (Remote)                                                
INFO     ------------------------------------------------------------                
INFO     Checking remote prerequisites...                                            
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     ‚úÖ Prerequisites OK                                                         
INFO     Checking remote GPU availability: [4, 5]...                                 
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     ‚úÖ GPUs available: [4, 5]                                                   
INFO     Checking remote port 30000...                                               
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     ‚úÖ Port 30000 available                                                     
INFO                                                                                 
INFO     ‚úÖ All preflight checks passed!                                             
INFO                                                                                 
INFO     üì¶ Deploying code...                                                        
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     Deploying code to ~/.bifrost/workspace                                      
INFO     [chan 1] Opened sftp connection (server version 3)                          
INFO     [chan 1] sftp session closed.                                               
INFO     Code deployed to ~/.bifrost/workspace                                       
INFO     ‚úÖ Code deployed to ~/.bifrost/workspace                                    
INFO     üìç Expanded workspace path: /home/ubuntu/.bifrost/workspace                 
INFO     üîß Running bootstrap to install SGLang...                                   
INFO        Bootstrap command: export PATH="$HOME/.local/bin:$PATH" && [ -d          
         .venv-sglang ] && echo "Using existing venv: .venv-sgla...                  
INFO     ============================================================                
Using existing venv: .venv-sglangUsing Python 3.12.12 environment at: .venv-sglang‚†ã R
Resolved 162 packages in 132msAudited 162 packages in 1mswarning: The package `sglang
 @ git+https://github.com/sgl-project/sglang.git@6a7322ffbc3b6949694c7c17f9b8501c9efd
c21f#subdirectory=python` does not have an extra named `all`=== Installed SGLang vers
ion ===Using Python 3.12.12 environment at: .venv-sglangVersion: 0.5.5.post1INFO     
üìä Bootstrap exit code: 0                                                   
INFO     ============================================================                
INFO     ‚úÖ Bootstrap completed successfully                                         
INFO     ‚úÖ Verified venv exists: .venv-sglang                                       
INFO     üîç Verifying SGLang installation...                                         
INFO     ‚úÖ SGLang 0.5.5.post1 verified installed                                    
INFO     ‚úÖ Installation complete at /home/ubuntu/.bifrost/workspace                 
INFO     üöÄ Starting SGLang server on remote...                                      
INFO     ‚úÖ Server started in tmux session: sglang-gelato-30b                        
INFO     ‚è≥ Waiting for server to be ready...                                        
INFO     ‚úÖ Server is ready (took ~50s)                                              
INFO     ‚úÖ Server is ready!                                                         
INFO                                                                                 
INFO     ‚úÖ Server deployed successfully!                                            
INFO        URL: http://150.136.217.70:30000                                         
INFO        API Base: http://150.136.217.70:30000/v1                                 
INFO                                                                                 
INFO     üìä Step 2: Running ScreenSpot-Pro Evaluation                                
INFO     ------------------------------------------------------------                
INFO        Config: configs/16_gelato_30b_a3b_17.py                                  
INFO                                                                                 
INFO     üöÄ Running evaluation on remote machine...                                  
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     üì¶ Deploying clicker codebase via git...                                    
INFO     Deploying code to ~/.bifrost/workspace                                      
INFO     [chan 3] Opened sftp connection (server version 3)                          
INFO     [chan 3] sftp session closed.                                               
INFO     Code deployed to ~/.bifrost/workspace                                       
INFO     Running 1 bootstrap step(s)...                                              
INFO     Step 1/1: export PATH="$HOME/.local/bin:$PATH"                              
         uv sync --frozen                                                            
INFO     All bootstrap steps completed successfully                                  
INFO     ‚úÖ Codebase deployed to ~/.bifrost/workspace                                
INFO     [chan 16] Opened sftp connection (server version 3)                         
INFO     [chan 16] sftp session closed.                                              
INFO     ‚úÖ Config uploaded to ~/.bifrost/workspace/configs/16_gelato_30b_a3b_17.py  
INFO     üìù Starting evaluation in tmux session: eval-16_gelato_30b_a3b_17           
INFO     üìù Full eval command being executed:                                        
INFO     export PATH=\$HOME/.local/bin:\$PATH && cd ~/.bifrost/workspace && \        
         echo '=== Debug: Environment Check ===' && \                                
         echo 'PWD: '\$(pwd) && \                                                    
         echo 'PATH: '\$PATH && \                                                    
         echo 'uv location: '\$(command -v uv || echo 'NOT FOUND') && \              
         echo 'python location (before activation): '\$(command -v python || echo    
         'NOT FOUND') && \                                                           
         echo '.venv exists: '\$([ -d .venv ] && echo 'YES' || echo 'NO') && \       
         echo '.venv/bin/activate exists: '\$([ -f .venv/bin/activate ] && echo 'YES'
         || echo 'NO') && \                                                          
         echo '=== Activating venv ===' && \                                         
         source .venv/bin/activate || { echo 'ERROR: Failed to activate venv'; exit  
         1; } && \                                                                   
         echo 'python location (after activation): '\$(command -v python) && \       
         echo 'python version: '\$(python --version) && \                            
         echo 'VIRTUAL_ENV: '\$VIRTUAL_ENV && \                                      
         [ -n "\$VIRTUAL_ENV" ] || { echo 'ERROR: VIRTUAL_ENV not set after          
         activation'; exit 1; } && \                                                 
         echo '=== Starting evaluation ===' && \                                     
         python run_rollouts.py --config                                             
         ~/.bifrost/workspace/configs/16_gelato_30b_a3b_17.py \                      
         --output ~/clicker_results/16_gelato_30b_a3b_17_20251111-055026/results.json
INFO     üìù Full tmux command:                                                       
INFO                                                                                 
         tmux new-session -d -s eval-16_gelato_30b_a3b_17 "                          
         export PATH=\$HOME/.local/bin:\$PATH && cd ~/.bifrost/workspace && \        
         echo '=== Debug: Environment Check ===' && \                                
         echo 'PWD: '\$(pwd) && \                                                    
         echo 'PATH: '\$PATH && \                                                    
         echo 'uv location: '\$(command -v uv || echo 'NOT FOUND') && \              
         echo 'python location (before activation): '\$(command -v python || echo    
         'NOT FOUND') && \                                                           
         echo '.venv exists: '\$([ -d .venv ] && echo 'YES' || echo 'NO') && \       
         echo '.venv/bin/activate exists: '\$([ -f .venv/bin/activate ] && echo 'YES'
         || echo 'NO') && \                                                          
         echo '=== Activating venv ===' && \                                         
         source .venv/bin/activate || { echo 'ERROR: Failed to activate venv'; exit  
         1; } && \                                                                   
         echo 'python location (after activation): '\$(command -v python) && \       
         echo 'python version: '\$(python --version) && \                            
         echo 'VIRTUAL_ENV: '\$VIRTUAL_ENV && \                                      
         [ -n "\$VIRTUAL_ENV" ] || { echo 'ERROR: VIRTUAL_ENV not set after          
         activation'; exit 1; } && \                                                 
         echo '=== Starting evaluation ===' && \                                     
         python run_rollouts.py --config                                             
         ~/.bifrost/workspace/configs/16_gelato_30b_a3b_17.py \                      
         --output ~/clicker_results/16_gelato_30b_a3b_17_20251111-055026/results.json
         2>&1 | tee ~/clicker_results/16_gelato_30b_a3b_17_20251111-055026/eval.log  
         echo 'Eval exit code: '$? >>                                                
         ~/clicker_results/16_gelato_30b_a3b_17_20251111-055026/eval.log             
         "                                                                           
                                                                                     
INFO     ‚úÖ Evaluation started in tmux session: eval-16_gelato_30b_a3b_17            
INFO                                                                                 
INFO     üìä Streaming evaluation logs (Ctrl+C to stop streaming, eval continues)...  
INFO     ============================================================                
Traceback (most recent call last):
  File "/home/ubuntu/.bifrost/workspace/run_rollouts.py", line 13, in <module>
    import trio
ModuleNotFoundError: No module named 'trio'
Eval exit code: 0
INFO                                                                                 
INFO     ============================================================                
INFO     ‚úÖ Evaluation completed successfully!                                       
INFO                                                                                 
INFO     üíæ Step 3: Syncing Results                                                  
INFO     ------------------------------------------------------------                
INFO     üìä Syncing final evaluation results...                                      
INFO     üìã Syncing evaluation logs...                                               
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     [chan 2] Opened sftp connection (server version 3)                          
INFO     [chan 2] sftp session closed.                                               
WARNING  ‚ö†Ô∏è  Could not download eval logs: [Errno 13] Permission denied              
 
INFO     üìã Remote file status: -rw-rw-r-- 1 ubuntu ubuntu 192 Nov 11 05:51          
         /home/ubuntu/clicker_results/16_gelato_30b_a3b_17_20251111-055026/eval.log  
INFO     üìã Last 50 lines of remote eval.log:                                        
INFO     ============================================================                
Traceback (most recent call last):
  File "/home/ubuntu/.bifrost/workspace/run_rollouts.py", line 13, in <module>
    import trio
ModuleNotFoundError: No module named 'trio'
Eval exit code: 0

INFO     ============================================================                
WARNING  ‚ö†Ô∏è  Could not sync files: Remote path not found:                            
 
         ~/clicker_results/16_gelato_30b_a3b_17_20251111-055026/results.json         
INFO                                                                                 
INFO     üßπ Step 4: Cleanup                                                          
INFO     ------------------------------------------------------------                
INFO     üõë Stopping server...                                                       
INFO     Connected (version 2.0, client OpenSSH_8.9p1)                               
INFO     Authentication (publickey) successful!                                      
INFO     Connected to ubuntu@150.136.217.70:22                                       
INFO     ‚úÖ Server stopped                                                           
INFO                                                                                 
INFO     ============================================================                
INFO     üéâ Pipeline Complete!                                                       
INFO     üìÇ Results directory: results/16_gelato_30b_a3b_17_20251111-055026          
INFO                                                                                 

